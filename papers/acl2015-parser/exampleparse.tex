% System Overview
% By Bean
\documentclass{article}

\usepackage{tikz}
\usetikzlibrary{shapes,arrows,shadows,calc}
\usepackage{amsmath,bm,times}
\usepackage{verbatim}
\thispagestyle{empty}
\begin{document}
% Define the layers
\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

% Define block styles used later
\tikzstyle{input}=[draw, fill=blue!20, text width=8em,
    text centered, minimum height=2em,drop shadow]
\tikzstyle{output}=[draw, fill=green!20, text width=8em,
    text centered, minimum height=2em,drop shadow]
\tikzstyle{intermediate}=[draw,dashed, fill=blue!20, text width=8em,
    text centered, minimum height=2em,drop shadow]
\tikzstyle{sys} = [draw, text width=10em, fill=red!20,text centered,
    minimum height=3em, rounded corners, drop shadow]

% Define distances for bordering
\def\blockdist{0.8}
\def\rowdist{-0.5}
\def\circler{0.05cm}
\begin{tikzpicture}
%line 1
    \path (\blockdist,0) node (Root) [] {\textbf{\large{Root}}};
    \path (Root.east)+(\blockdist,0) node (John) [] {\textbf{\large{John}}};
    \path (John.east)+(\blockdist,0) node (saw) [] {\textbf{\large{saw}}};
    \path (saw.east)+(\blockdist,0) node (a1) [] {\textbf{\large{a}}};
    \path (a1.east)+(\blockdist,0) node (dog) [] {\textbf{\large{dog}}};
    \path (dog.east)+(\blockdist +0.1,0) node (yesterday) [] {\textbf{\large{yesterday}}};
    \path (yesterday.east)+(\blockdist,0) node (which) [] {\textbf{\large{which}}};
    \path (which.east)+(\blockdist,0) node (was) [] {\textbf{\large{was}}};
    \path (was.east)+(0.5 ,0) node (a2) [] {\textbf{\large{a}}};
    \path (a2.east)+(0.3+\blockdist,0) node (Yorkshire) [] {\textbf{\large{Yorkshire}}};
    \path (Yorkshire.east)+(-0.1+\blockdist,0) node (Terrier) [] {\textbf{\large{Terrier}}};
%line 2
    \path (-0.1,\rowdist) node () [] {\textbf{\large{Id:}}};
    \path (Root.center)+(0,\rowdist) node () [] {0};
    \path (John.center)+(0,\rowdist) node () [] {1};
    \path (saw.center)+(0,\rowdist) node () [] {2};
    \path (a1.center)+(0,\rowdist) node () [] {3};
    \path (dog.center)+(0,\rowdist) node () [] {4};
    \path (yesterday.center)+(0,\rowdist) node () [] {5};
    \path (which.center)+(0,\rowdist) node () [] {6};
    \path (was.center)+(0,\rowdist) node () [] {7};
    \path (a2.center)+(0,\rowdist) node () [] {8};
    \path (Yorkshire.center)+(0,\rowdist) node () [] {9};
    \path (Terrier.center)+(0,\rowdist) node (seq9) [] {10};

%line 3
    \path (0,2*\rowdist) node (seq) [] {\textbf{\large{Seq:}}};
    %\path (0,2*\rowdist) node () [] {-1};
    \path (Root.center)+(0,2*\rowdist) node () [] {-1};
    \path (John.center)+(0,2*\rowdist) node () [] {1};
    \path (saw.center)+(0,2*\rowdist) node () [] {10};
    \path (a1.center)+(0,2*\rowdist) node () [] {2};
    \path (dog.center)+(0,2*\rowdist) node () [] {3};
    \path (yesterday.center)+(0,2*\rowdist) node () [] {4};
    \path (which.center)+(0,2*\rowdist) node () [] {8};
    \path (was.center)+(0,2*\rowdist) node () [] {7};
    \path (a2.center)+(0,2*\rowdist) node () [] {6};
    \path (Yorkshire.center)+(0,2*\rowdist) node () [] {5};
    \path (Terrier.center)+(0,2*\rowdist) node (seq9) [] {9};

%draw line
\path (seq.west)+(0,-0.25) node (line1left) {};
\path (Terrier.east |- line1left) node (line1right) {};
\path [draw, -,color=black,line width=0.6pt] (line1left)--(line1right);
%line 4, 3 rowdist
    \path (0.1,3*\rowdist) node () [] {\textbf{\large{Parse:}}};

    \def\curnode{John}
    \def\othernodes{Root,saw,a1,dog,yesterday,which,was,a2,Yorkshire,Terrier}

    %draw normal point
     \foreach \x in \othernodes
    {
        \draw (\x.center)+(0,5*\rowdist) node (4\x)[]{};
        \fill (\x.center)+(0,5*\rowdist) circle (\circler);
    }
    %draw current node
    \draw (\curnode.center)+(0,5*\rowdist) node (4\curnode)[]{};
    \fill (\curnode.center)+(0,5*\rowdist) [color=red] circle (\circler);
    %draw normal arc
    \def\childnode{4John}
    \def\loose{0.6}

    \def\parentnode{4Root}
    \def\score{-3.39}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){ } (\childnode);
    \draw (auto.center) node {\tiny{\score}};
    \def\parentnode{4a1}
    \def\score{1.41}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt] {\tiny{\score}};
    \def\parentnode{4dog}
    \def\score{1.89}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};

    \def\loose{0.5}
    \def\parentnode{4yesterday}
    \def\score{1.41}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt] {\tiny{\score}};
    \def\parentnode{4which}
    \def\score{1.47}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};
    \def\parentnode{4was}
    \def\score{1.55}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
    \def\parentnode{4a2}
    \def\score{0.91}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node  {\tiny{\score}};

    \def\loose{0.55}
    \def\parentnode{4Yorkshire}
    \def\score{1.01}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
    \def\parentnode{4Terrier}
    \def\score{1.41}
    \def\colr{black}
    \def\rightdist{0}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};
    %red
    \def\loose{0.6}
    \def\parentnode{4saw}
    \def\score{3.71}
    \def\colr{red}
    \def\rightdist{0}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, looseness=\loose,line width=1pt] node[auto](auto){} (\childnode);
    \draw (auto.center) node[red] {\tiny{\score}};
%line 5, 4 rowdist
    \def\curnode{a1}
    \def\othernodes{Root,John,saw,dog,yesterday,which,was,a2,Yorkshire,Terrier}

    %draw normal point
     \foreach \x in \othernodes
    {
        \draw (\x.center)+(0,9*\rowdist) node (5\x)[]{};
        \fill (\x.center)+(0,9*\rowdist) circle (\circler);
    }
    %draw current node
    \draw (\curnode.center)+(0,9*\rowdist) node (5\curnode)[]{};
    \fill (\curnode.center)+(0,9*\rowdist) [color=red] circle (\circler);
    %draw normal arc, loose 0.7,0.5
    \def\childnode{5a1}
    \def\loose{0.7}

    \def\parentnode{5Root}
    \def\score{-3.46}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){ } (\childnode);
    \draw (auto.center) node[below=1pt] {\tiny{\score}};
    \def\parentnode{5John}
    \def\score{1.63}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};
    \def\parentnode{5saw}
    \def\score{2.34}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[below=1pt] {\tiny{\score}};
    \def\parentnode{5yesterday}
    \def\score{3.15}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt] {\tiny{\score}};
    \def\parentnode{5which}
    \def\score{2.04}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};

    \def\loose{0.55}
    \def\parentnode{5was}
    \def\score{2.45}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
    \def\parentnode{5a2}
    \def\score{1.93}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node  {\tiny{\score}};
    \def\parentnode{5Yorkshire}
    \def\score{1.44}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
    \def\parentnode{5Terrier}
    \def\score{1.81}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};
    %red
    \def\loose{0.7}
    \def\parentnode{5dog}
    \def\score{4.48}
    \def\colr{red}
    \def\rightdist{0}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, looseness=\loose,line width=1pt] node[auto](auto){} (\childnode);
    \draw (auto.center) node[red] {\tiny{\score}};
%line 6, 4 rowdist
    \def\curnode{dog}
    \def\othernodes{Root,John,saw,a1,yesterday,which,was,a2,Yorkshire,Terrier}

    %draw normal point
     \foreach \x in \othernodes
    {
        \draw (\x.center)+(0,13*\rowdist) node (6\x)[]{};
        \fill (\x.center)+(0,13*\rowdist) circle (\circler);
    }
    %draw current node
    \draw (\curnode.center)+(0,13*\rowdist) node (6\curnode)[]{};
    \fill (\curnode.center)+(0,13*\rowdist) [color=red] circle (\circler);
    %draw normal arc, loose 0.6,0.5,0.55
    \def\childnode{6dog}
    \def\loose{0.7}

    \def\parentnode{6Root}
    \def\score{-2.39}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){ } (\childnode);
    \draw (auto.center) node[below=1pt] {\tiny{\score}};
    \def\parentnode{6John}
    \def\score{1.36}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};
    \def\parentnode{6saw}
    \def\score{2.54}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  left, looseness=\loose,line width=1pt] node[auto](auto){} (\childnode);
    \draw (auto.center) node[red,below=1pt] {\tiny{\score}};
    \def\parentnode{6a1}
    \def\score{2.49}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose,dashed,line width=1pt] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};
    \def\parentnode{6yesterday}
    \def\score{2.14}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt] {\tiny{\score}};
    \def\parentnode{6which}
    \def\score{1.67}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};

    \def\loose{0.55}
    \def\parentnode{6was}
    \def\score{2.44}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
    \def\parentnode{6a2}
    \def\score{1.47}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node  {\tiny{\score}};

    \def\parentnode{6Yorkshire}
    \def\score{1.79}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
    \def\parentnode{6Terrier}
    \def\score{2.44}
    \def\colr{black}
    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose] node[auto](auto){} (\childnode);
    \draw (auto.center) node {\tiny{\score}};

%line 7, dots, 2.5 rowdist
\path (yesterday.center)+(0,15.5*\rowdist) node (dots) {\textbf{$\vdots$}};
%line 8, 3.5 rowdist
    %\def\curnode{saw}
%    \def\othernodes{Root,John,a1,dog,yesterday,which,was,a2,Yorkshire,Terrier}
%
%    %draw normal point
%     \foreach \x in \othernodes
%    {
%        \draw (\x.center)+(0,19*\rowdist) node (8\x)[]{};
%        \fill (\x.center)+(0,19*\rowdist) circle (\circler);
%    }
%    %draw current node
%    \draw (\curnode.center)+(0,19*\rowdist) node (8\curnode)[]{};
%    \fill (\curnode.center)+(0,19*\rowdist) [color=red] circle (\circler);
%    %draw normal arc, loose 0.6,0.5,0.55
%    \def\childnode{8saw}
%    \def\loose{0.8}
%    \def\parentnode{8Root}
%    \def\score{-1.01}
%    \def\colr{red}
%    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  left, looseness=\loose,line width=1pt] node[auto](auto){ } (\childnode);
%    \draw (auto.center) node[red,below=1pt] {\tiny{\score}};
%
%    \def\loose{0.6}
%    \def\parentnode{8John}
%    \def\score{2.24}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node {\tiny{\score}};
%    \def\parentnode{8a1}
%    \def\score{1.89}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node[above=1pt] {\tiny{\score}};
%    \def\parentnode{8dog}
%    \def\score{3.21}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node {\tiny{\score}};
%    \def\parentnode{8yesterday}
%    \def\score{2.05}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node[above=1pt] {\tiny{\score}};
%
%
%    %\def\loose{0.55}
%    \def\parentnode{8which}
%    \def\score{1.28}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node {\tiny{\score}};
%    \def\parentnode{8was}
%    \def\score{1.51}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
%    \def\parentnode{8a2}
%    \def\score{0.90}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node  {\tiny{\score}};
%    \def\parentnode{8Yorkshire}
%    \def\score{1.15}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  left, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node[above=1pt]  {\tiny{\score}};
%    \def\parentnode{8Terrier}
%    \def\score{1.31}
%    \def\colr{black}
%    \path [draw, -,\colr] (\parentnode) edge[bend  right, looseness=\loose,dashed] node[auto](auto){} (\childnode);
%    \draw (auto.center) node {\tiny{\score}};

%draw line
\path (line1left)+(0,14*\rowdist) node (line2left) {};
\path (line1right)+(0,14*\rowdist) node (line2right) {};
\path [draw, -,color=black,line width=0.6pt] (line2left)--(line2right);
%line 9, parse out, 5 rowdist

    %\path (-1,23*\rowdist) node () [] {Output:};
    \path (0.2,17*\rowdist) node () [] {\textbf{\large{Output:}}};

    \def\othernodes{Root,John,saw,a1,dog,yesterday,which,was,a2,Yorkshire,Terrier}

    %draw normal point
    %\def\rowdistmultinum{24}
    \def\rowdistmultinum{19.5}
     \foreach \x in \othernodes
    {
        \draw (\x.center)+(0,\rowdistmultinum*\rowdist) node (9\x)[]{};
        \fill (\x.center)+(0,\rowdistmultinum*\rowdist) [color=red]circle (\circler);
    }
    %draw arc, loose 0.6,0.5,0.55
    \def\childnode{9John}
    \def\loose{1}
    \def\parentnode{9saw}
    \def\idx{1}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, looseness=\loose,line width=1pt] node[auto](auto){ } (\childnode);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

    \def\childnode{9a1}
    \def\loose{1}
    \def\parentnode{9dog}
    \def\idx{2}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, looseness=\loose,line width=1pt] node[auto](auto){ } (\childnode);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

    \def\childnode{9dog}
    \def\loose{1.5}
    \def\parentnode{9saw}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  left, line width=1pt] node[auto](auto){ } (\childnode.north);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

    \def\childnode{9yesterday}
    \def\loose{1.5}
    \def\parentnode{9saw}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  left, line width=1pt] node[auto](auto){ } (\childnode);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

    %{Root,John,a1,dog,yesterday,which,was,a2,Yorkshire,Terrier}
    \def\childnode{9Yorkshire}
    \def\loose{1.5}
    \def\parentnode{9Terrier}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, line width=1pt] node[auto](auto){ } (\childnode);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

    %{Root,John,a1,dog,yesterday,which,was,a2,Yorkshire,Terrier}
    \def\childnode{9a2}
    \def\loose{1.5}
    \def\parentnode{9Terrier}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, line width=1pt] node[auto](auto){ } (\childnode);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

     %{Root,John,a1,dog,yesterday,which,was,a2,Yorkshire,Terrier}
    \def\childnode{9was}
    \def\loose{1.5}
    \def\parentnode{9Terrier}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, line width=1pt] node[auto](auto){ } (\childnode);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

     %{Root,John,a1,dog,yesterday,which,was,a2,Yorkshire,Terrier}
    \def\childnode{9which}
    \def\loose{1.5}
    \def\parentnode{9Terrier}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  right, line width=1pt] node[auto](auto){ } (\childnode);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

     \def\childnode{9Terrier}
    \def\loose{1.5}
    \def\parentnode{9dog}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  left, line width=1pt] node[auto](auto){ } (\childnode.north);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};

     \def\childnode{9saw}
    \def\loose{1.5}
    \def\parentnode{9Root}
    \def\idx{3}
    \def\colr{red}
    \path [draw, ->,-latex,\colr] (\parentnode) edge[bend  left, line width=1pt] node[auto](auto){ } (\childnode.north);
    %\draw (auto.center) node[red,above=1pt] {\footnotesize{\textcircled{\tiny{\idx}}}};
\end{tikzpicture}

\end{document}
