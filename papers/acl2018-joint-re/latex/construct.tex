\section{Relation Triple Construction}
\label{sec:triple}
We present three different algorithms, $e_1$-First, $e_2$-First, and
Order-First, to construct relation triple from RE tag sequence. The last one was
proposed by Zheng.


\subsection*{$e_1$-First and $e_2$-First Construction Algorithms}
$e_1$-First treats $e_1$ of a triple as the dominating entity. For
a tag sequence $(t_1, t_2, \ldots, t_n)$, $e_1$-First algorithm goes through it
from left to right, for each predicted $e1$ with type $r$, find the
nearest $e2$ with the same type $r$. This entity pair will be constructed as a
triple \{$e1$, $r$, $e2$\}. See Algorithm \ref{algo:e1} for details.

\begin{algorithm}%[H]
  \small{
    \caption{$e_1$-First Triple Construction}
    \label{algo:e1}
    \SetKwInOut{Input}{input}
    \SetKwInOut{Output}{output}
    
    \Input{Triple tag sequence $TS$ of one sentence}
    \Output{Relation triples $RT$}
  
    \BlankLine

    $E1 \leftarrow$ all $e1$ from $TS$ \;
    $E2 \leftarrow$ all $e2$ from $TS$ \;
    \For{each $e1$ in $E1$}{
      get the relation type of $e1$, $r$, from its tags \;
      find the nearest e2 in $E2$ which shares type $r$ \;
      add \{ $e1$, $r$, $e2$ \} to $RT$ \;
      remove $e2$ from $E2$ \;
    }
  }
\end{algorithm}

$e_2$-first algorithm is the exact opposite of $e_1$-first, where $e_2$ of a
triple is the dominating entity. For each $e2$, it is paired with the
nearest $e1$ which shares same relation type with $e2$.



\subsection*{Order-First Construction Algorithm}
In order-first algorithm, $e_1$ and $e_2$ are equally treated. 
From left to right, the first $e_1$ with type $r$ will pair 
with the first encountered $e_2$ with the same type. 
The second $e_1$ will pair with second $e_2$ with the same type and so on. In
other words, the order of $e1$s and $e2$s will dominate construction results.
More details are in Algorithm \ref{algo:order}. 

\begin{algorithm}%[H]
  \small{
    \caption{Order-First Triple Construction} \label{algo:order}
    \SetKwInOut{Input}{input}
    \SetKwInOut{Output}{output}
    
    \Input{Triple tag sequence $TS$ of one sentence}
    \Output{Relation triples $RT$}
  
    \BlankLine
    \For{each mentioned $r$}{
      $E1 \leftarrow$ all $e1$ belonging to $r$ from $TS$ \;
      $E2 \leftarrow$ all $e2$ belonging to $r$ from $TS$ \;
      \While{both $E1$ and $E2$ are not empty}{
        $e1 \leftarrow$ head entity in $E1$ \;
        $e2 \leftarrow$ head entity in $E2$ \;
        add \{ $e1$, $r$, $e2$ \} to $RT$ \;
        remove $e1$ from $E1$ \;
        remove $e2$ from $E2$ \;
      }
    }
  }
\end{algorithm}




