\section{Approach}
\label{sec:appro}
%In this section, we describe the general framework of our system to solve this problem. A running example will be given to illustrate the detail function of different parts of the system. 
%
%\subsection{Framework}

\begin{figure}[ht]
\centering
\epsfig{file=figure/framework.eps, width=1\columnwidth}
\caption{System Framework}
\label{fig:frame}
\end{figure}

\figref{fig:frame} shows the framework of our fault-tolerant
information extraction system. The input of the system is
one or more medical images of the same format (but 
with some slight variations), possibly after preprocessing (discussed in
\secref{sec:discuss}). Those images will then be processed by the OCR Engine 
and transformed into XML format with spatial annotations. 
What's more, descriptions about those images in ODL will be created 
by graphical user interfaces. To be more specific, those 
graphical user interfaces will  generate descriptions mentioned above 
automatically given some parameters, which saves the efforts by the users 
(such as medical practitioners).

 
%\JY{
Next, we propose a fuzzy parser to match all the elements on 
the provided description with the text from the XML data. The 
parser takes the XML data and the corresponding ODL description as inputs 
and produces the parsing results. The parsing results are in the form of 
parsing trees in which every leaf nodes contains both the description and 
the corresponding textual information.
The word ``fuzzy'' means that the parser not only 
extracts useful information from the XML files, but also tolerates the 
errors in the inputs. Specifically, XML files 
and descriptions can be inaccurate to some extent since the OCR may make
mistakes and users may introduce typos and inaccuracies in the description. 
The fuzzy parser can provide candidate parsing results even if the data doesn't
match the description completely. The most suitable result is selected 
from the candidates by using the scoring policy presented later.    

Fuzzy parsing produces a parsing tree 
that may contain some parsing errors. 
Our incremental correction process corrects such errors by
parsing multiple images using the same description and collects
common OCR errors in the parses.  
The system then prompts the user to correct these common OCR errors. 
User corrections are then added to the correction model 
which updates and improves the existing parser.
Subsequent parsing utilizes the new model 
and hopefully produces in fewer errors.

%}

% Our fuzzy parser then takes the XML and
% the corresponding ODL description as inputs, and produces the
% parsing result, which contains extracted values and possible 
% errors generated during parsing. 

% When multiple images are parsed,
% the system may direct the user to the common errors discovered in these
% images, which may be due to the same hardware, and prompt the user for
% possible corrections. Such corrections would then be incorporated
% into a correction model which is merged with the fuzzy parser.
% Subsequent parsing will be conducted based on the new model and 
% hopefully will result in fewer errors.

% \JY{
% Talk about the key concept in the approaches
% Fuzzy parser
% Optimization strategy
% Parameter tunning
% Learning from past
% Image variety
% }

In next few subsections, we will present a running example, using
an ECG image, with
which we explain the syntax and semantics of ODL, 
as well as the interactive human correction mechanism in this framework.
The techniques developed in this section can be applied to 
other types of semi-structured medical images as well.
%The main components of our system are as follows:
%\begin{enumerate}
%\item The OCR engine generates XML files which contain both the recoginized text and the corresponding coordinates information. 
%\item The fuzzy parser, which is automatically generated based on the image description, is used to parse the XML files and extract the information. 
%\item The fuzzy parser will suggest some errors for human to correct, after that the correction model which is used for fuzzy parsing will be updated based on the correction that human made.
%\end{enumerate}

\subsection{Running Example}
%Our running example is the ECG image shown in \figref{fig:ecgexample2}. 
In this example (\figref{fig:ecgexample2}), 
we are interested in extracting the time, the measurements, 
and some basic diagnoses, all highlighted in the bright red ovals.
Fragments of the XML coming out of the OCR engine are shown 
in \figref{fig:ocrre}. In addition, spatial coordinates for different 
OCR units, like paragraphs, lines and words, are recorded as values  
for the ``title'' attribute in XML. 

%There are numerous ways to describe the image using ODL.
%Our later discussion on the ODL language
%will use the abstract syntax. 
The ODL description of the image in abstract syntax is shown
in \figref{fig:absdes}. 
%\JY{
%In the description, 
{\em Osource} is the root description for the entire data of interest. 
Many types are used in the definition of {\em Osource} object to represent 
different forms of the textual information, 
for example, {\em Ostruct} is a type that 
represents the information with multiple fileds, and {\em Ounion} is a 
type that represents the enumerable information. 
%}
% {\em Ostruct} represents a structure
% of multiple fields. {\em Ounion} represents alternatives, while {\em Osource}
% is the root description of the entire data of interest.

%\input{description1}
\input{abstract1}
\input{result1}

% \KZ{Make the concrete syntax, abstract syntax figs double column and more
% compact.}

% in detail and notions

The description automatically generates a fuzzy parser 
that produces a parsing representation, as shown in \figref{fig:parseresult}. 
If the system detects a popular OCR error, e.g., an error associated with
variable $p1$ (the Hz value at the bottom of \figref{fig:ecgexample2}),
in which ``150'' is incorrectly recognized as ``15o'' by the OCR,
it prompts the user for a correction. If the user edits 
``15o'' and changes it to ``150,'' the system learns 
that there is a possibility for the number ``0'' 
to be mistaken for the letter ``o'' in this type of image and this OCR engine.
Subsequently, in the same image and for other images of the same type, 
the system may automatically  correct similar errors, e.g., 
the value for variable $p2$ from ``1o.o'' to ``10.0.'' 

