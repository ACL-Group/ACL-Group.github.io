\section{Spatial Features}

Considering only one POI's location, it can be as simple as a longitude and latitude; however, with relative position with each other, more information emerged. POIs with different categories show different characteristic on many statistics related to spatial aspect, as explained following in details, and naturally different feature works well on different categories.

\subsection{POI's Neighborhood}
Naturally we find POIs related to each other appears in the same zone, such as a shopping center with shops and food, a financial center with banks and office building, or a college town with colleges, museums, and observatories. Profiling a POI¡¯s neighborhood would not only provide a prior probability of the category POI may belong to, but also being a good feature in differentiate POI in different categories.

\begin{figure}[ht]
\begin{minipage}{0.5\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/No_other_POI_within_100m.eps}
\caption{No other POIs within 100m}
\label{fig:NoPOI}
\end{minipage}
\begin{minipage}{0.5\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/Shop_&_Service's_and_Professional_&_Other_Places'_neighbor_within_100m.eps}
\caption{Shop \& Service's and Professional \& Other Places 's neighbor within 100m}
\label{fig:ShopProf}
\end{minipage}
\end{figure}

POI's neighborhood showed great difference between different categories. According our analysis on Foursquare data(showed in Figure \ref{fig:NoPOI}, around 30\% POIs belongs to ¡°Outdoors \& Recreation¡± has no POIs near them within 100m, while most of POIs belongs to ¡°Food¡± have other POIs near them. From the figure we can also see that ¡°Nightlife Spot¡±, ¡°Shop \& Service¡± are often around with other POIs, too, which get along with common sense.
%\begin{figure}[h]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  \epsfig{file=plot/No_other_POI_within_100m.eps,width=0.9\columnwidth}
%% figure caption is below the figure
%\caption{No other POIs within 100m}
%\label{fig:NoPOI}       % Give a unique label
%\end{figure}

Not only the ¡°crowding¡± of the POI's neighborhood differs from one category to another, the category distribution of the neighborhood also differs from one another. As shown in the Figure \ref{fig:ShopProf} we can see there are more food and shops around ¡°Shop \& Service¡±, but there are more ¡°Arts \& Entertainment¡±, ¡°Professional \& Other Places¡± near professional places.
%\begin{figure}[h]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  \epsfig{file=plot/Shop_&_Service's_and_Professional_&_Other_Places'_neighbor_within_100m.eps,width=0.9\columnwidth}
%% figure caption is below the figure
%\caption{Shop \& Service's and Professional \& Other Places 's neighbor within 100m}
%\label{fig:ShopProf}       % Give a unique label
%\end{figure}


Thus we use NB\_m feature to describe the characteristic of having different category distribution within certain distance around the POI. NB\_m feature is defined as: for a POI i, the category distribution of all the POIs within i's 100 meters and the number of POI within 100m.We prove NB\_m Feature is effectual by showing that add it will yield better classification result for all different categories, as shown in figure \ref{fig:F1NB100}.


Furthermore, we found that different categories prefer different m. For example, as shown in Figure \ref{fig:F1NBShopResi} NB\_10m yields best result for ¡°Residence¡±, and larger m would lower the score, however, ¡°Shop \& Service¡± prefer larger m, and it gains best result when m equals 100m.
%\begin{figure*}[h]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  %\epsfig{file=plot/F1_measure_using_NB_100_feature.eps,width=0.9\columnwidth}
%  \includegraphics[width=0.75\textwidth]{plot/F1_measure_using_NB_100_feature.eps}
%% figure caption is below the figure
%\caption{F1 measure using NB\_100m feature}
%\label{fig:F1NB100}       % Give a unique label
%\end{figure*}
%\begin{figure*}[h]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  %\epsfig{file=plot/F1_measure_using_NB_m_feature_on_Shop_&_Service_and_Residence.eps,width=0.9\columnwidth}
%  \includegraphics[width=0.75\textwidth]{plot/F1_measure_using_NB_m_feature_on_Shop_&_Service_and_Residence.eps}
%% figure caption is below the figure
%\caption{F1 measure using NB\_m feature on Shop \& Service and Residence with different m}
%\label{fig:F1NBShopResi}       % Give a unique label
%\end{figure*}

\begin{figure}[ht]
\begin{minipage}{0.45\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/F1_measure_using_NB_100_feature.eps}
\caption{F1 measure using NB\_100m feature}
\label{fig:F1NB100}
\end{minipage}
\begin{minipage}{0.55\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/F1_measure_using_NB_m_feature_on_Shop_&_Service_and_Residence.eps}
\caption{F1 measure using NB\_m feature on Shop \& Service and Residence with different m}
\label{fig:F1NBShopResi}
\end{minipage}
\end{figure}

\subsection{Nearest K POI}
Analyzing a neighborhood yields the region's type, meanwhile, we found the nearest k POIs' category correlated to POI's own category in a more straight forward way, and in some way compensate the neighborhood feature. As showed in Figure \ref{fig:foodcollege}, ``Food''and ``College \& University'' showed typical intention in gathering together. For ``College \& University'', no matter they located in urban or suburban, the college buildings are definitely close to each other. And for ¡°Food¡±, we can see the trend very often in our life: there might be a street of local snack, or a part of business zone full of restaurants. Besides, ``Nightlife Spot'' are often mixed with ``Food'' , which is another typical characteristic for both ``Nightlife Spot'' and ``Food''.
%\begin{figure}[ht]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  \epsfig{file=plot/Food's_&_College's_1-Nearest_POI_category_distribution.eps,width=0.7\columnwidth}
%% figure caption is below the figure
%\caption{Food's \& College's 1-Nearest POI category distribution}
%\label{fig:foodcollege}       % Give a unique label
%\end{figure}

\begin{figure}[ht]
\begin{minipage}[ht]{0.5\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/Food's_&_College's_1-Nearest_POI_category_distribution.eps}
\caption{Food's \& College's 1-Nearest POI category distribution}
\label{fig:foodcollege}
\end{minipage}
\begin{minipage}[ht]{0.5\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/F1_measure_using_N_5_feature.eps}
\caption{F1 measure using N\_5 feature}
\label{fig:F1N5}
\end{minipage}
\end{figure}

It seems that nearest K POI feature is a part of POI's neighborhood feature, however, focusing on the nearest gives extra information on the particular spot the POI is on, for example, even though the neighborhood mainly consist of office buildings, but this particular POI lying in a part of the region that is full of restaurants would add on more probability that the POI belongs to ¡°Food¡±. In other words, POI's neighborhood is considering a neighborhood based on the absolute distance, which not only represent the neighborhood's attribute, also tells how bustling within the region. Nearest K POI feature is a relative neighborhood which consider only nearest k POIs, no matter they are far away from each other or very close to each other.

We use N\_k feature to profile the nearest k POIs' category distribution. NB\_m feature is defined as: for a POI i, the category distribution of nearest k POIs within i's 1km. Add N\_k feature yields better result for all the categories except Professional and other places, as shown in Figure \ref{fig:F1N5} According to our experiment, having larger k won't change result very much, we show Food and Nightlife Spot for example in Figure \ref{fig:F1NKFoodNight}.

%\begin{figure}[h]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  \epsfig{file=plot/F1_measure_using_N_5_feature.eps,width=0.9\columnwidth}
%% figure caption is below the figure
%\caption{F1 measure using N\_5 feature}
%\label{fig:F1N5}       % Give a unique label
%\end{figure}
%
%\begin{figure}[h]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  \epsfig{file=plot/F1_measure_using_N_K_feature_on_Food_and_Nightlife_Spot.eps,width=0.9\columnwidth}
%% figure caption is below the figure
%\caption{F1 measure using N\_K feature on Food and Nightlife Spot with different K}
%\label{fig:F1NKFoodNight}       % Give a unique label
%\end{figure}

%\begin{figure}[h]
%\centering
%\hspace{-3cm}
%\subfigure[F1 measure using N\_5 feature]{
%\epsfig{file=plot/F1_measure_using_N_5_feature.eps,width=0.6\columnwidth}
%}
%%\hspace{-3cm}
%\subfigure[F1 measure using N\_K feature on Food and Nightlife Spot with different K]{
%\epsfig{file=plot/F1_measure_using_N_K_feature_on_Food_and_Nightlife_Spot.eps,width=0.6\columnwidth}
%}
%\hspace{-3cm}
%\caption{}
%\end{figure}

\begin{figure}[ht]

\begin{minipage}[ht]{0.5\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/F1_measure_using_N_K_feature_on_Food_and_Nightlife_Spot.eps}
\caption{F1 measure using N\_K feature on Food and Nightlife Spot with different K}
\label{fig:F1NKFoodNight}
\end{minipage}
\begin{minipage}[ht]{0.5\linewidth}
\centering
\includegraphics[width=\columnwidth]{plot/Log(Avg(CD)).eps}
\caption{Log(Avg(Category Distance))}
\label{fig:LogCD}
\end{minipage}
\end{figure}

\subsection{Distance to Category}
With NB\_m and N\_k above, we have a good representation for the POIs near the target POI, however, we haven't considering those POIs which are not within m meters in NB\_m, or not on the top k list in N\_k. There's a also reason why those POIs are, in some sense, far from the target POI. So how to extract valid information from the POIs that are not near, we come up with the feature that shows the distance to the nearest POI in different categories. We are trying to depict the distance from the target POI to different categories, we may get the information that the POI is close to ¡°Food¡± from above features, but we didn't know the characteristic that the POI is far from ¡°Shop¡± and ¡°Art¡±, thus may more probable be a ¡°Residence¡±.

We define $CD$(Category Distance) as: for a POI i, for each category c, $CD_i= min_{j \in c} distance(i,j)$

We found some interesting facts about category distance. We calculated different categories' average distance to nearest ¡°Travel and Transport¡±,as shown in Table \ref{tab:DisToTravel}, ¡°Professional \& Other Places¡± is the nearest to transportation.

%\begin{table}[ht]
%\small
%% table caption is above the table
%\caption{Different categories' average distance to nearest ¡°Travel and Transport¡±}
%\label{tab:DisToTravel}       % Give a unique label
%% For LaTeX tables use
%\begin{tabular}{ll}
%\hline\noalign{\smallskip}
%Category & Distance(m)  \\
%\noalign{\smallskip}\hline\noalign{\smallskip}
%Professional \& Other Places  &    210.851 \\
%Nightlife Spot  &   227.3833 \\
%Shop \& Service  &   227.5524 \\
%Arts \& Entertainment  &   230.5648 \\
%     Food  &   237.8074 \\
%College \& University  &    275.849 \\
%Residence  &   308.1981 \\
%\noalign{\smallskip}\hline
%\end{tabular}
%\end{table}

 And we see from the Log(Avg(category distance)) from Figure \ref{fig:LogCD} that ¡°Outdoor \& Recreation¡± is far from all the categories, while Food is near to all.

%\begin{figure}[ht]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  \epsfig{file=plot/Log(Avg(CD)).eps,width=0.7\columnwidth}
%% figure caption is below the figure
%\caption{Log(Avg(Category Distance))}
%\label{fig:LogCD}       % Give a unique label
%\end{figure}

Directly using CD as feature in classification is not effective, therefore we further define $LCD1, LCD2 $ as $LCD1_i = Log(1+CD_i), LCD2_i = Log(1+ Log(1+CD_i))$. We test LCD1 on all categories, it shows improvement for all categories as shown in Figure \ref{fig:F1LogCD}.
%\begin{figure}[ht]
%% Use the relevant command to insert your figure file.
%% For example, with the graphicx package use
%  \epsfig{file=plot/F1_measure_using_LCD1_feature.eps,width=0.7\columnwidth}
%% figure caption is below the figure
%\caption{F1 measure using LCD1 feature}
%\label{fig:F1LogCD}       % Give a unique label
%\end{figure}


%\begin{figure}[h]
%\centering
%\hspace{-3cm}
%\subfigure[NewYork]{
%\epsfig{file=plot/Log(Avg(CD)).eps,width=0.7\columnwidth}
%}
%\hspace{-3cm}
%\subfigure[Singapore]{
%\epsfig{file=plot/F1_measure_using_LCD1_feature.eps,width=0.7\columnwidth}
%}
%\hspace{-3cm}
%\caption{L1 Category Classification}
%\end{figure}


{\centering
\begin{minipage}{0.55\linewidth}
  %\centering
  \raggedleft

  \includegraphics[width=\columnwidth]{plot/F1_measure_using_LCD1_feature.eps}
  \captionof{figure}{F1 measure using LCD1 feature}
  \label{fig:F1LogCD}
\end{minipage}
\begin{minipage}{0.4\linewidth}
  \centering
  \small
  \begin{tabular}{ll}
  
  \hline\noalign{\smallskip}
  Category & Distance(m)  \\
  \noalign{\smallskip}\hline\noalign{\smallskip}
  Professional \& Other Places  &    210.851 \\
  Nightlife Spot  &   227.3833 \\
  Shop \& Service  &   227.5524 \\
  Arts \& Entertainment  &   230.5648 \\
  Food  &   237.8074 \\
  College \& University  &    275.849 \\
  Residence  &   308.1981 \\
  \noalign{\smallskip}\hline
  \end{tabular}
  \captionof{table}{Different categories' average distance to nearest ¡°Travel and Transport¡±}
  \label{tab:DisToTravel}
\end{minipage}


}




\subsection{Region Compare}
After features about the POI's location alone, we combine the factor from both spatial and user behavior. Inspired by the previous work of considering the number of check-ins and unique users, we compare the target POI's number of total check-ins and unique users with the POIs around it. In NB\_m, we limit neighborhood with explicit meters, likewise, we also build several different Region Compare features with different m.

We define $RC\_T(i,c) = Avg_{j \in c, distance (i,j)<m} \#Checkin(j) - \#Checkin(i)$,
$RC\_U(i,c) = Avg_{j \in c, distance (i,j)<m} \#UniqueUser(j) - \# UniqueUser (i)$
Then the score below 0 means that people check in more times at target POI than the POIs near it. Checking in a place more than others near it is actually saying people are gathered to the place, or in other word, it is a ¡°destination¡±, not a ¡°by the way¡±. Intuitively, ¡°Art \& Entertainment¡± is more of a ¡°destination¡±, people come in purpose to watch a show, or see an exhibition. ¡°Outdoor \& Recreation¡± is more of a ¡°destination¡±, too, since people planned before to have a weekend with children in the theme park, or have a routine of going to gym. ¡°Food¡± is a ¡°by the way¡± both by intuition and statistics, people grab something to eat all the time: after a walk, before a movie. Interestingly, we found ¡°Shop \& Service¡± a ¡°by the way¡±, too. It seems interesting shops are getting more, thus people are attracted in a shop though not intended. And surprisingly ¡°Nightlife Spot¡± is more of a ¡°destination¡±, it seems bars are getting more popularity and loyalty from customers than shops and food.
\begin{figure}[ht]
\centering
% Use the relevant command to insert your figure file.
% For example, with the graphicx package use
  \epsfig{file=plot/RegionCompare.eps,width=0.7\columnwidth}
% figure caption is below the figure
\caption{Region Compare (Total Check in)}
\label{fig:RC}       % Give a unique label
\end{figure}

\begin{figure}[ht]
\centering
% Use the relevant command to insert your figure file.
% For example, with the graphicx package use
  \epsfig{file=plot/F1_measure_using_RegCom_T_feature.eps,width=0.7\columnwidth}
% figure caption is below the figure
\caption{F1 measure using RegCom feature}
\label{fig:F1RC}       % Give a unique label
\end{figure}
